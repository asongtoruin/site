<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://kit.fontawesome.com/5063c00b10.js"></script>
  
    <title>Pub Names :: ruszkow.ski — data, graphs and other nonsense</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="What? A year into lockdown, one of the things I miss the most is going to the pub. Being at home hasn&amp;rsquo;t stopped me from drinking beers and talking nonsense at my friends, but it&amp;rsquo;s not quite the same through a screen is it? So, what&amp;rsquo;s my best alternative? Making graphs about pub names. That&amp;rsquo;s definitely it.
I&amp;rsquo;ve separated this out by each country in Great Britain, so here are the graphs for England and Wales, as well as the Scotland one up there in the header."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://ruszkow.ski/graphs/2021-03-23-pub-names/" />


<link rel="stylesheet" href="https://ruszkow.ski/assets/style.css">

  <link rel="stylesheet" href="https://ruszkow.ski/assets/green.css">



<link rel="stylesheet" href="https://ruszkow.ski/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://ruszkow.ski/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="https://ruszkow.ski/img/favicon/green.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Pub Names :: ruszkow.ski — data, graphs and other nonsense" />
<meta name="twitter:description" content="What? A year into lockdown, one of the things I miss the most is going to the pub. Being at home hasn&amp;rsquo;t stopped me from drinking beers and talking nonsense at my friends, but it&amp;rsquo;s not quite the same through a screen is it? So, what&amp;rsquo;s my best alternative? Making graphs about pub names. That&amp;rsquo;s definitely it.
I&amp;rsquo;ve separated this out by each country in Great Britain, so here are the graphs for England and Wales, as well as the Scotland one up there in the header." />
<meta name="twitter:site" content="https://ruszkow.ski" />
<meta name="twitter:creator" content="Adam" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Pub Names :: ruszkow.ski — data, graphs and other nonsense">
<meta property="og:description" content="What? A year into lockdown, one of the things I miss the most is going to the pub. Being at home hasn&amp;rsquo;t stopped me from drinking beers and talking nonsense at my friends, but it&amp;rsquo;s not quite the same through a screen is it? So, what&amp;rsquo;s my best alternative? Making graphs about pub names. That&amp;rsquo;s definitely it.
I&amp;rsquo;ve separated this out by each country in Great Britain, so here are the graphs for England and Wales, as well as the Scotland one up there in the header." />
<meta property="og:url" content="https://ruszkow.ski/graphs/2021-03-23-pub-names/" />
<meta property="og:site_name" content="Pub Names" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2021-03-23 19:11:59 &#43;0000 UTC" />











</head>
<body class="">



<div class="container center">


  
    <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    ruszkow.ski
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/posts">Posts</a></li>
        
      
        
          <li><a href="/graphs">Graphs</a></li>
        
      
        
          <li><a href="/about">About</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/posts">Posts</a></li>
      
    
      
        <li><a href="/graphs">Graphs</a></li>
      
    
      
        <li><a href="/about">About</a></li>
      
    
    
  </ul>
</nav>

  
</header>

  

  <div class="content">
    
<div class="post">
  <h1 class="post-title">
  <a href="https://ruszkow.ski/graphs/2021-03-23-pub-names/">Pub Names</a></h1>
<div class="post-meta">
    
    <span class="post-date">
      <i class="fas fa-calendar-day"></i> 2021-03-23
    </span>
    
    
    <span class="post-author">::
      <i class="fas fa-user"></i> Adam
    </span>
    
    <span class='post-reading-time'>::
     <i class="fas fa-clock"></i> 3 minutes
    </span>
</div>



  
  <div class="img-outer">
    <a href="https://ruszkow.ski/img/graphs/pub-names/scotland-pub-names.png" target="_blank">
      <img class="scaled-img" src="https://ruszkow.ski/img/graphs/pub-names/scotland-pub-names.png">
    </a>
  </div>
  
  <div class="post-content">
    <h1 id="what">What?</h1>
<p>A year into lockdown, one of the things I miss the most is going to the pub. Being at home hasn&rsquo;t <em>stopped</em> me from drinking beers and talking nonsense at my friends, but it&rsquo;s not quite the same through a screen is it? So, what&rsquo;s my best alternative? Making graphs about pub names. That&rsquo;s definitely it.</p>
<p>I&rsquo;ve separated this out by each country in Great Britain, so here are the graphs for England and Wales, as well as the Scotland one up there in the header.</p>
<p>
  <div class="img-outer">
    <a href="https://ruszkow.ski/img/graphs/pub-names/england-pub-names.png" target="_blank">
      <img class="scaled-img" src="https://ruszkow.ski/img/graphs/pub-names/england-pub-names.png">
    </a>
  </div>



  <div class="img-outer">
    <a href="https://ruszkow.ski/img/graphs/pub-names/wales-pub-names.png" target="_blank">
      <img class="scaled-img" src="https://ruszkow.ski/img/graphs/pub-names/wales-pub-names.png">
    </a>
  </div>

</p>
<p>What&rsquo;s telling here is the sheer <em>number</em> of pubs listed in the England graph compared to the other two. I&rsquo;ll need to have a dig about to confirm that&rsquo;s actually valid! Otherwise, I&rsquo;m not surprised by Red Lion&rsquo;s dominance in England (I grew up in the Midlands after all), nor Crown&rsquo;s prominence in Scotland.</p>
<h1 id="how">How?</h1>
<p>First, we need to get the data. As always, OpenStreetMap provides a great source for geographical data. I used <a href="http://download.geofabrik.de">Geofabrik</a>&rsquo;s downloads to get <em>all</em> of the OSM data for each country, resulting in some pretty chunky files.</p>
<p>Getting the names of pubs is, in fact, one of the <a href="https://github.com/osmcode/pyosmium/blob/master/examples/pub_names.py">examples</a> given in the <code>pyosmium</code> library, though this just prints all of the names. I adapted this to instead write nodes, ways and polygons for each country. It takes a little while to run through all of the files (again, they are pretty large) so I set this going in its own little script, and dealt with the processing and graphing separately.</p>
<p>The extracted locations can be read in extremely easily with <code>geopandas</code>. I only read in the points and polygons as the ways seemed to just provide outlines to the polygons themselves, resulting in a duplication of outputs. However, we do need both points and polygons as some pubs appear only as points and some only appear as polygons. Guess what though - some appear as <em>both</em>! To try and ensure we&rsquo;re not counting these twice, we simply intersect the two layers and remove the points that are located within one of our polygons.</p>
<p>The last real bit of work that takes place is cleaning the names. I&rsquo;ve taken out most of the common suffixes (&ldquo;Arms&rdquo;, &ldquo;Hotel&rdquo; and the like) as they&rsquo;re not really a critical part of the name, removed &ldquo;the&rdquo; from the start of any name, replaced any <code>&amp;</code> with the full &ldquo;and&rdquo; and converted to Title Case to make sure they&rsquo;re fairly consistent. Phew. Once that&rsquo;s done, it&rsquo;s just a case of plotting!</p>
<h1 id="libraries--resources">Libraries / Resources</h1>
<ul>
<li><code>pandas</code> and <code>matplotlib</code> as usual for processing and plotting, with <a href="https://github.com/asongtoruin/plot_styles"><code>plot_styles</code></a> for basic colours</li>
<li><code>pyosmium</code> really does make working with the bulk OSM downloads pretty straightforward, with <code>shapely</code> used to simplify writing out the files and <code>geopandas</code> to simplify reading them back in</li>
<li>This is basically a <a href="https://www.atipofoundry.com/fonts/noway-round">Noway Round</a> tribute site these days and I&rsquo;m not ashamed of it</li>
</ul>
<h1 id="data-sources">Data Sources</h1>
<ul>
<li><a href="https://www.openstreetmap.org">OpenStreetMap</a> data for each country downloaded from <a href="http://download.geofabrik.de/europe/great-britain.html">Geofabrik</a></li>
</ul>
<h1 id="code">Code</h1>
<p>Find it on <a href="https://github.com/asongtoruin/data_analysis/tree/master/pub%20names">GitHub</a></p>

  </div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span
        class="pagination__title-h">Read other posts</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      
      <span class="button next">
        <a href="https://ruszkow.ski/graphs/2021-01-21-covid-19-vaccinations/">
          <span class="button__text">Covid-19 Vaccinations</span>
          <span class="button__icon">→</span>
        </a>
      </span>
      
    </div>
  </div>
  

  

</div>

  </div>

  
    
      <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2021 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://ruszkow.ski/assets/main.js"></script>
<script src="https://ruszkow.ski/assets/prism.js"></script>





    
  
</div>

</body>
</html>
