<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://kit.fontawesome.com/5063c00b10.js"></script>
  
    <title>GitHub Actions on a Schedule :: ruszkow.ski</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Over the past year or so I&rsquo;ve been using GitHub Actions on a few different projects for building documentation and executables. The direct integration into GitHub makes it a bit more convenient than Travis, and being able to use predefined Actions makes simple processes way easier to set up.
However, one thing I hadn&rsquo;t noticed until recently was that you can trigger workflows to run on a schedule. This is an extremely powerful feature that, to me, seems under-publicised. My first idea was that gives us the option of setting up auto-updating graphs - so I decided to try that out with UK Covid-19 vaccination data. You can see the results of this here, but in this post I&rsquo;m going to run through the (fairly straightforward) set-up I used.
"/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://ruszkow.ski/posts/2021-01-21-github-actions-on-a-schedule/" />


<link rel="stylesheet" href="https://ruszkow.ski/assets/style.css">

  <link rel="stylesheet" href="https://ruszkow.ski/assets/green.css">



<link rel="stylesheet" href="https://ruszkow.ski/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://ruszkow.ski/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="https://ruszkow.ski/img/favicon/green.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="GitHub Actions on a Schedule :: ruszkow.ski — " />
<meta name="twitter:description" content="Over the past year or so I&rsquo;ve been using GitHub Actions on a few different projects for building documentation and executables. The direct integration into GitHub makes it a bit more convenient than Travis, and being able to use predefined Actions makes simple processes way easier to set up.
However, one thing I hadn&rsquo;t noticed until recently was that you can trigger workflows to run on a schedule. This is an extremely powerful feature that, to me, seems under-publicised. My first idea was that gives us the option of setting up auto-updating graphs - so I decided to try that out with UK Covid-19 vaccination data. You can see the results of this here, but in this post I&rsquo;m going to run through the (fairly straightforward) set-up I used.
" />
<meta name="twitter:site" content="https://ruszkow.ski/" />
<meta name="twitter:creator" content="Adam" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="GitHub Actions on a Schedule :: ruszkow.ski — ">
<meta property="og:description" content="Over the past year or so I&rsquo;ve been using GitHub Actions on a few different projects for building documentation and executables. The direct integration into GitHub makes it a bit more convenient than Travis, and being able to use predefined Actions makes simple processes way easier to set up.
However, one thing I hadn&rsquo;t noticed until recently was that you can trigger workflows to run on a schedule. This is an extremely powerful feature that, to me, seems under-publicised. My first idea was that gives us the option of setting up auto-updating graphs - so I decided to try that out with UK Covid-19 vaccination data. You can see the results of this here, but in this post I&rsquo;m going to run through the (fairly straightforward) set-up I used.
" />
<meta property="og:url" content="https://ruszkow.ski/posts/2021-01-21-github-actions-on-a-schedule/" />
<meta property="og:site_name" content="GitHub Actions on a Schedule" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2021-01-21 22:06:55 &#43;0000 UTC" />











</head>
<body class="">



<div class="container center">


  
    <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    ruszkow.ski
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/posts">Posts</a></li>
        
      
        
          <li><a href="/graphs">Graphs</a></li>
        
      
        
          <li><a href="/about">About</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/posts">Posts</a></li>
      
    
      
        <li><a href="/graphs">Graphs</a></li>
      
    
      
        <li><a href="/about">About</a></li>
      
    
    
  </ul>
</nav>

  
</header>

  

  <div class="content">
    
<div class="post">
  <h1 class="post-title">
  <a href="https://ruszkow.ski/posts/2021-01-21-github-actions-on-a-schedule/">GitHub Actions on a Schedule</a></h1>
<div class="post-meta">
    
    <span class="post-date">
      <i class="fas fa-calendar-day"></i> 2021-01-21
    </span>
    
    
    <span class="post-author">::
      <i class="fas fa-user"></i> Adam
    </span>
    
    <span class='post-reading-time'>::
     <i class="fas fa-clock"></i> 3 minutes
    </span>
</div>


<span class="post-tags">
  
  #<a href="https://ruszkow.ski/tags/github/">GitHub</a>&nbsp;
  
</span>


  
  <div class="post-content">
    <p>Over the past year or so I&rsquo;ve been using GitHub Actions on a few different
projects for building documentation and executables. The direct integration into
GitHub makes it a bit more convenient than Travis, and being able to use
predefined Actions makes simple processes way easier to set up.</p>
<p>However, one thing I hadn&rsquo;t noticed until recently was that you can trigger
workflows to run <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows#scheduled-events">on a schedule</a>.
This is an extremely powerful feature that, to me, seems under-publicised. My
first idea was that gives us the option of setting up auto-updating graphs - so
I decided to try that out with UK Covid-19 vaccination data. You can see the
results of this <a href="/graphs/2021-01-21-covid-19-vaccinations/">here</a>,
but in this post I&rsquo;m going to run through the (fairly straightforward) set-up I
used.</p>
<h4 id="the-config-file">The config file</h4>
<p>As with all(?) uses of GitHub Actions, the workflow is a YAML file stored in
<code>.github/workflows</code> in the
<a href="https://github.com/asongtoruin/covid-graphs">project</a>.
It&rsquo;s relatively short, so here&rsquo;s the whole thing:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">name</span>: <span style="color:#ae81ff">Redraw graph</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">schedule</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">cron</span>:  <span style="color:#e6db74">&#39;0 2 * * *&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">build</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Get date</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          echo &#34;CURR_DATE=$(date +%Y-%m-%d)&#34; &gt;&gt; $GITHUB_ENV</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Set up Python 3.7</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/setup-python@v2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">python-version</span>: <span style="color:#ae81ff">3.7</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Install dependencies</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          python -m pip install --upgrade pip setuptools wheel
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          pip install -r requirements.txt</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Draw graph</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: <span style="color:#ae81ff">python draw.py</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Commit updated graph back to the repo</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">EndBug/add-and-commit@v7</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">message</span>: <span style="color:#e6db74">&#39;${{ env.CURR_DATE }}: Automated graph update&#39;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">add</span>: <span style="color:#e6db74">&#39;Graphs/*.png&#39;</span>
</span></span></code></pre></div><h3 id="the-process">The process</h3>
<p>From the above, you can see there are several different steps in the process.
This is running on Ubuntu just to make sure the module installs are nice and
smooth (as opposed to Windows potentially needing a bit of faff).</p>
<ol>
<li>We checkout the repo. A fairly standard first step.</li>
<li>We get the current date and store it in a way that we can access in other
parts of the process. In this instance, we&rsquo;re just using it to keep our
commit messages informative</li>
<li>We set up Python. Again, GitHub Actions coming into its own by making this a
single line command</li>
<li>We update <code>pip</code>, just in case, and then install our dependencies.</li>
<li>We actually draw the graph!</li>
<li>We use the <a href="https://github.com/marketplace/actions/add-commit">add-and-commit</a>
Action to stage and commit our updated graph. The beauty of this Action is
that it doesn&rsquo;t create a commit if the files are unchanged - so if the data
we&rsquo;re using hasn&rsquo;t been updated between our scheduled runs of the process,
our graph doesn&rsquo;t change and we don&rsquo;t get an empty commit. This helps to keep
the commit logs nice and clean.</li>
</ol>
<h4 id="the-scheduling">The scheduling</h4>
<p>Setting it up to run on a schedule is super-simple and is shown right near the
top of the file. Simply:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">schedule</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">cron</span>:  <span style="color:#e6db74">&#39;0 2 * * *&#39;</span>
</span></span></code></pre></div><p>The syntax is as standard for cron jobs (I always use the
<a href="https://crontab.guru/">crontab guru</a> to check before I run) and&hellip; that&rsquo;s
it??? You don&rsquo;t need to do anything else with your repo, simply having the
schedule defined in your workflow ensures it is automatically called. As you can
see here, I have my process run at 2am each day, in the hope that this will
ensure the open data has been updated.</p>

  </div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span
        class="pagination__title-h"></span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      <span class="button previous">
        <a href="https://ruszkow.ski/posts/2021-04-06-mapping-englands-most-common-pub-names/">
          <span class="button__icon">←</span>
          <span class="button__text">Mapping England&#39;s Most Common Pub Names</span>
        </a>
      </span>
      
      
      <span class="button next">
        <a href="https://ruszkow.ski/posts/2020-11-17-dance-dancier-danciest/">
          <span class="button__text">Dance, Dancier, Danciest</span>
          <span class="button__icon">→</span>
        </a>
      </span>
      
    </div>
  </div>
  

  

</div>

  </div>

  
    
      <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2025 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://ruszkow.ski/assets/main.js"></script>
<script src="https://ruszkow.ski/assets/prism.js"></script>





    
  
</div>

</body>
</html>
